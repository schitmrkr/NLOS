## x86 Assembly

x86 Assembly is a low-level programming language that is used to write code for the x86 architecture. It is a machine language that is used to write code for the x86 architecture.

We will start with the basics and then move on to more advanced topics. We will cover the following topics:

1. x86 Syntax
2. x86 Instructions
3. x86 Registers
4. x86 Memory
5. x86 Stack
6. x86 Flags
7. x86 Interrupts
8. x86 Exceptions
9. x86 System Calls
10. x86 Processors
11. x86 Boot Process
12. x86 Memory Management
13. x86 Process Management
14. x86 Interrupt Management
15. x86 Exception Management
16. x86 System Call Management
17. x86 Processor Management
18. x86 Boot Loader
19. x86 Kernel
20. x86 User Space

---

### x86 Syntax

Assembly syntax defines how an instruction is written. Example(Intel sytax):

```Assembly
mov eax, ebx
```

Meaning: copy value in register ebx to register eax.

x86 has two common syntaxes:

1. Intel Syntax: Used by NASM, MASM, BIOS. Operands destination, source.
2. AT&T Syntax: Used by GCC, GAS. Operands source, destination. (REVERSED)

A general structure of an x86 instruction looks like this:

```Assembly
mnemonic operand1, operand2
```

Example:

```Assembly
add eax, 4
```

You can operate on:

1. Registers: `mov eax, ebx`
2. Immediate values: `mov ecx, 4`
3. Memory: `mov eax, [ebx] ; read memory at address stored in ebx` and `mov [0xB8000], ax ; write ax to VGA memory at address 0xB8000`
4. I/O ports: `in al, dx` and `out dx, al`

On the other hand, labels are used to mark a location in the code. Example:

```Assembly
start:
    mov eax, 0

loop:
    inc eax
    jmp loop
```

A **Label** defines an address the CPU can jump to. Example: `start:` defines an address the CPU can jump to.

Finally, **Directives** are not instructions. They tell assembler how to assemble the code. Example:

`msg db 'A'` defines a byte variable named msg with value 'A'.

`msg dw 0x1234` defines a word variable named msg with value 0x1234.

`msg dd 0x12345678` defines a double word variable named msg with value 0x12345678.

`section .data` defines a data section.

`global _start` defines that \_start is a global symbol. It exports the symbol to the linker.

`extern kmain` imports C function

#### Typical NASM File Structure

```
; Multiboot header
section .multiboot
    dd 0x1BADB002
    dd 0x0
    dd - (0x1BADB002 + 0x0)

; Code
section .text
global _start
extern kmain

_start:
    call kmain

hang:
    jmp hang
```
